<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  
 <ui:composition template="/template/template.xhtml">
 <ui:define name="Titulo">Histórico</ui:define>
 <ui:define name="content">

    <h:form id="form">
    
    		
    	<p:menubar style="margin-bottom:20px">
    		<p:menuitem value="Acervo" url="user.jsf"/>
    		
    		<p:submenu label="Administração">
    			<p:menuitem value="Adicionar/deletar livro" url="admin.jsf"/>
    			<p:menuitem value="Livros emprestados" url="borrowedBooks.jsf"/>
    			<p:menuitem value="Livros atrasados" url="delayedBooks.jsf"/>
    			<p:menuitem value="Histórico de empréstimos" url="historic.jsf"/>
    		</p:submenu>
    		
    		<f:facet name="options">
    			<p:commandButton  value="Logout" ajax="false" action="#{gerenciamentoLivroNew.logout}" style="margin-right:10px" icon="ui-icon-extlink"/>
    		</f:facet>
    	</p:menubar>
    	
    <f:event type="preRenderView" listener="#{visualizarHistorico.getHistorico}" />
    	
 	<p:dataTable value="#{visualizarHistorico.historico}" var="livro">
		<f:facet name="header">
        	Histórico de Empréstimo
    	</f:facet>
		
		<p:column headerText="Título" filterBy="#{livro.titulo}">
			<h:outputText value="#{livro.titulo}"/>
		</p:column>
		
		<p:column headerText="Autor" filterBy="#{livro.autor}">
			<h:outputText value="#{livro.autor}"/>
		</p:column>
 		
 		<p:column headerText="Data de devolução" style="width:150px; text-align:center">
 			<h:outputText value="#{livro.dataDevolucao.time}">
				    <f:convertDateTime pattern="dd/MM/yy" />
            </h:outputText>
 		</p:column>	
   
   		<p:column headerText="Usuário" style="width:100px">
   			<h:outputText value="#{livro.user.login}"/>
   		</p:column>
	</p:dataTable>
 	
    </h:form>
</ui:define>
</ui:composition>
</html>
